<p>Input:<br><textarea id="input" rows="20" cols="80"></textarea>
<p><button onclick="click()">Click</button>
<p>Output:<br><textarea id="output" rows="20" cols="80"></textarea>

<script>

function click() {

  let input = document.getElementById("input").value;

  input = input.replace(/\W/g, " ");
  input = input.replace(/\s{2,}/g, " ")
  input = input.toUpperCase();

  let wordtoken = input.split(" ");
  let wordtype = [...new Set(wordtoken)];
  let ratio = wordtype.length / wordtoken.length;
  let count = 0;
  let dictionary = {};

  for (i = 0; i < wordtype.length; i++ ) {
    for (k = 0; k < wordtoken.length; k++) {
      if (wordtype[i] == wordtoken[k]) {
      count = count + 1;
      }
    }
    dictionary[wordtype[i]] = count;
    count = 0;
  }

  let sortlist = Object.keys(dictionary).sort(function(a,b) {
    return dictionary[b] - dictionary[a]
  });
  let output = "";
  for (let p = 0; p < sortlist.length; p++) {
    output += sortlist[p] + " " + dictionary[sortlist[p]] + "\n";
  }
  document.getElementById("output").value = "types and frequencies:" + "\n" + output + "Type/Token ratio:" + " " + ratio*100+"%";
}




</script>
